@import url('https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --bg-deep: #0b0c16;
  --bg-canvas: #0d0e1a;
  --neon-lime: #c8f135;
  --neon-cyan: #00f5ff;
  --neon-purple: #a855f7;
  --neon-pink: #f472b6;
}

* {
  box-sizing: border-box;
}

body {
  color: #ffffff;
  background: var(--bg-deep);
  margin: 0;
  padding: 0;
  overflow: hidden;
  font-family: 'Outfit', sans-serif;
  -webkit-font-smoothing: antialiased;
}

/* ── React Flow overrides ── */
.react-flow__pane {
  background-color: transparent !important;
  cursor: default !important;
}

.react-flow__background {
  background-color: var(--bg-canvas) !important;
}

/* Subtle dot grid like the reference */
.react-flow__background pattern circle {
  fill: rgba(255, 255, 255, 0.15) !important;
}

/* Layer ordering: groups behind edges, edges behind regular nodes */
.react-flow__node-group {
  z-index: 0 !important;
}
.react-flow__edges {
  z-index: 1 !important;
}
.react-flow__node-bookmark,
.react-flow__node-tab,
.react-flow__node-note {
  z-index: 2 !important;
}

/* Controls styling */
.react-flow__controls {
  background: rgba(13, 14, 26, 0.7) !important;
  backdrop-filter: blur(16px);
  border: 1px solid rgba(255,255,255,0.08) !important;
  border-radius: 14px !important;
  box-shadow: 0 8px 32px rgba(0,0,0,0.4) !important;
  overflow: hidden;
}

.react-flow__controls-button {
  background: transparent !important;
  border: none !important;
  border-bottom: 1px solid rgba(255,255,255,0.06) !important;
  color: rgba(255,255,255,0.5) !important;
  transition: all 0.2s !important;
}

.react-flow__controls-button:hover {
  background: rgba(255,255,255,0.06) !important;
  color: #fff !important;
}

.react-flow__controls-button:last-child {
  border-bottom: none !important;
}

.react-flow__controls-button svg {
  fill: currentColor !important;
}

/* ── Edges ── */
.react-flow__edge-path {
  stroke-linecap: round !important;
  stroke-linejoin: round !important;
  transition: stroke 0.15s ease, stroke-width 0.15s ease, filter 0.15s ease !important;
}

/* Hover — slightly thicker, subtle glow */
.react-flow__edge:hover .react-flow__edge-path {
  stroke-width: 3 !important;
  filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.3)) !important;
}

/* Selected — glow using the edge's own color */
.react-flow__edge.selected .react-flow__edge-path {
  stroke-width: 3.5 !important;
  filter:
    drop-shadow(0 0 6px rgba(255, 255, 255, 0.5))
    drop-shadow(0 0 14px rgba(255, 255, 255, 0.25)) !important;
}

/* Widen the invisible hit area so edges are easy to click */
.react-flow__edge-interaction {
  stroke-width: 20 !important;
}

/* ── Glassmorphism utils ── */
.glass {
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.glass-dark {
  background: rgba(8, 8, 20, 0.6);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.08);
}

/* ── Glow effects ── */
.glow-blue   { box-shadow: 0 0 0 2px #60a5fa55, 0 0 30px rgba(96, 165, 250, 0.35); }
.glow-purple { box-shadow: 0 0 0 2px #a855f755, 0 0 30px rgba(168, 85, 247, 0.35); }
.glow-green  { box-shadow: 0 0 0 2px #34d39955, 0 0 30px rgba(52, 211, 153, 0.35); }
.glow-orange { box-shadow: 0 0 0 2px #fb923c55, 0 0 30px rgba(251, 146, 60, 0.35); }
.glow-pink   { box-shadow: 0 0 0 2px #f472b655, 0 0 30px rgba(244, 114, 182, 0.35); }
.glow-teal   { box-shadow: 0 0 0 2px #2dd4bf55, 0 0 30px rgba(45, 212, 191, 0.35); }
.glow-lime   { box-shadow: 0 0 0 2px #a3e63555, 0 0 30px rgba(163, 230, 53, 0.35); }

/* ── Animations ── */
@keyframes pillFloat {
  0%   { transform: translateY(0px); }
  50%  { transform: translateY(-5px); }
  100% { transform: translateY(0px); }
}

.animate-float {
  animation: pillFloat 5s ease-in-out infinite;
}

@keyframes pulse-glow {
  0%, 100% { opacity: 0.85; }
  50%       { opacity: 1; }
}

.animate-pulse-glow {
  animation: pulse-glow 2.5s ease-in-out infinite;
}

@keyframes shimmer {
  0%   { background-position: -200% center; }
  100% { background-position: 200% center; }
}

/* ── Node selected ring ── */
.node-selected-ring {
  outline: 2px solid rgba(255,255,255,0.5);
  outline-offset: 3px;
}

/* ── Scrollbar ── */
::-webkit-scrollbar { width: 4px; height: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.15); border-radius: 2px; }

/* ── Connection Handles ── */
.react-flow__handle {
  width: 12px !important;
  height: 12px !important;
  border-radius: 50% !important;
  background: var(--accent-color, rgba(255, 255, 255, 0.9)) !important;
  border: 2px solid var(--accent-color, rgba(255, 255, 255, 0.4)) !important;
  opacity: 0;
  transition: opacity 0.15s ease, transform 0.15s ease, box-shadow 0.15s ease !important;
  z-index: 50 !important;
  cursor: crosshair !important;
}

/* Show handles when hovering the node */
.group:hover .react-flow__handle,
.react-flow__handle:hover {
  opacity: 1 !important;
  box-shadow: 0 0 0 3px var(--accent-glow, rgba(200, 241, 53, 0.35)) !important;
}

/* Scale per-direction, preserving ReactFlow's centering translate */
.group:hover .react-flow__handle-top,    .react-flow__handle-top:hover    { transform: translate(-50%, -50%) scale(1.1) !important; }
.group:hover .react-flow__handle-bottom, .react-flow__handle-bottom:hover { transform: translate(-50%,  50%) scale(1.1) !important; }
.group:hover .react-flow__handle-left,   .react-flow__handle-left:hover   { transform: translate(-50%, -50%) scale(1.1) !important; }
.group:hover .react-flow__handle-right,  .react-flow__handle-right:hover  { transform: translate( 50%, -50%) scale(1.1) !important; }

/* Active (connecting) state */
.react-flow__handle.connecting {
  opacity: 1 !important;
  background: var(--accent-color, #c8f135) !important;
  box-shadow: 0 0 0 4px var(--accent-glow, rgba(200, 241, 53, 0.4)) !important;
}

/* Valid drop target during connection */
.react-flow__handle.valid {
  opacity: 1 !important;
  background: var(--accent-color, #c8f135) !important;
  box-shadow: 0 0 0 5px var(--accent-glow, rgba(200, 241, 53, 0.5)) !important;
  transform: scale(1.4) !important;
}

